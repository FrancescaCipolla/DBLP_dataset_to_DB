CREATE TABLE VENUE(
    VENUE_ID BIGINT,
    VENUE_RAW TEXT,
    VENUE_TYPE VARCHAR(1),
    VENUE_ID_NEW BIGINT PRIMARY KEY
); 

CREATE TABLE ALIAS_ID(
    ALIAS_IDS BIGINT PRIMARY KEY
);

CREATE TABLE PAPER(
    PAPER_ID BIGINT PRIMARY KEY,
    TITLE TEXT NOT NULL,
    YEAR SMALLINT NOT NULL,
    N_CITATION SMALLINT NOT NULL,
    PAGE_START TEXT,
    PAGE_END TEXT,
    DOC_TYPE TEXT,
    PUBLISHER TEXT,
    VOLUME BIGINT,
    ISSUE BIGINT,
    DOI TEXT,
    ABSTRACT TEXT,
    NB_REFERENCES SMALLINT NOT NULL,
    VENUE_ID_NEW BIGINT,
    FOREIGN KEY (VENUE_ID_NEW) REFERENCES VENUE(VENUE_ID_NEW)
    ON DELETE NO ACTION ON UPDATE CASCADE
);

CREATE TABLE REFERENCE(
    PAPER_ID BIGINT,
    REFERENCED BIGINT,
    PRIMARY KEY(PAPER_ID,REFERENCED),
    FOREIGN KEY (PAPER_ID) REFERENCES PAPER (PAPER_ID)
    ON DELETE NO ACTION ON UPDATE CASCADE,
    FOREIGN KEY (REFERENCED) REFERENCES PAPER (PAPER_ID)
    ON DELETE NO ACTION ON UPDATE CASCADE
);

CREATE TABLE WITH_ALIAS(
    PAPER_ID BIGINT,
    ALIAS_IDS BIGINT,
    PRIMARY KEY(PAPER_ID,ALIAS_IDS),
    FOREIGN KEY (PAPER_ID) REFERENCES PAPER (PAPER_ID)
    ON DELETE NO ACTION ON UPDATE CASCADE,
    FOREIGN KEY (ALIAS_IDS) REFERENCES ALIAS_ID (ALIAS_IDS)
    ON DELETE NO ACTION ON UPDATE CASCADE

);


CREATE TABLE AUTHOR(
    AUTHOR_ID BIGINT PRIMARY KEY,
    AUTHOR_NAME TEXT NOT NULL
);

CREATE TABLE AUTHOR_EXTENDED(
   AUTHOR_ID BIGINT,
   AUTHOR_NAME TEXT,
   PRIMARY KEY (AUTHOR_ID,AUTHOR_NAME),
   FOREIGN KEY (AUTHOR_ID) REFERENCES AUTHOR (AUTHOR_ID)
   ON DELETE NO ACTION ON UPDATE CASCADE
);

CREATE TABLE WHO(
    PAPER_ID BIGINT,
    AUTHOR_ID BIGINT,
    AUTHOR_ORG TEXT,
    PRIMARY KEY (PAPER_ID,AUTHOR_ID),
    FOREIGN KEY (PAPER_ID) REFERENCES PAPER (PAPER_ID)
    ON DELETE NO ACTION ON UPDATE CASCADE,
    FOREIGN KEY (AUTHOR_ID) REFERENCES AUTHOR (AUTHOR_ID)
    ON DELETE NO ACTION ON UPDATE CASCADE
);


CREATE TABLE FOS(
   FOS_ID BIGINT PRIMARY KEY,
   FOS_NAME TEXT NOT NULL
);

CREATE TABLE WHAT(
   PAPER_ID BIGINT NOT NULL,
   FOS_ID BIGINT NOT NULL,
   FOS_W DECIMAL (6,5) NOT NULL,
   FOREIGN KEY (PAPER_ID) REFERENCES PAPER (PAPER_ID)
    ON DELETE NO ACTION ON UPDATE CASCADE,
    FOREIGN KEY (FOS_ID) REFERENCES FOS (FOS_ID)
    ON DELETE NO ACTION ON UPDATE CASCADE
);
